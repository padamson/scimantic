# Scimantic Server Implementation Roadmap

This roadmap defines **WHEN** we build the scimantic-server platform and its features for hosting and collaborating on Scimantic knowledge graphs. The server implements a **git-like workflow** for research projects with various hosting models.

For the **core scimantic roadmap**, see [02-when-roadmap.md](02-when-roadmap.md).
For **WHY**, see [the vision](00-why-vision.md).
For **WHAT** (system design), see [the architecture](01-what-architecture.md).

## Vision: GitHub for Semantic Knowledge Graphs

Scimantic-server enables researchers to:
- **Host** knowledge graphs (public or private)
- **Collaborate** with colleagues on shared projects
- **Discover** and build upon others' research
- **Publish** citable nanopublications
- **Track** provenance across federated graphs

### Hybrid Approach

The server complements the VS Code extension rather than replacing it:
- **VS Code extension**: Primary editing experience (rich IDE, local-first)
- **Scimantic-server**: Hosting, sharing, discovering, collaborating

## Principles

1. **Local-First**: Researchers own their data (`project.ttl` files in git)
2. **Git-Like**: Familiar workflow (`scimantic init/push/pull/clone`)
3. **Self-Hostable**: Open source backend for institutional deployment
5. **Academic Social**: Citations (dependencies, dependents), peer review, discussions, collections
6. **Content Negotiation**: RDF for machines, HTML for humans

## Deployment Options for Subset Publishing

Scimantic-server supports **three deployment models** that provide different hosting and access control options for published subsets:

### Scimantic.io (Hosted SaaS)
Community-hosted service for public and limited private projects:
- **Unlimited public subsets**: Freely accessible, discoverable via search
- **Limited private subsets**: Within reasonable storage/compute constraints
- **ORCID authentication**: Access control for institutional and private subsets
- **Content negotiation**: RDF for machines, HTML for browsers
- **Discovery**: Public subsets indexed and searchable
- **Community support**: GitHub Discussions, documentation

**Access patterns**: Public (anyone), Institutional (ORCID required), Private (collaborator lists)

### GitHub Pages (Static Publishing)
Alternative public publishing via CI/CD:
- **HTML + RDF export** from subset `.ttl` files via GitHub Actions
- **Static hosting**: No server costs, global CDN
- **Version control**: Full git history of subset generation
- **Custom domains**: `research.example.edu`
- **Provenance**: Link to source repository and master KG

**Access patterns**: Public only (no authentication support in static hosting)

### Self-Hosted (Open Source)
Institutional deployment for full control:
- **MIT/Apache 2.0 licensed** scimantic-server code
- **Docker Compose** deployment (production-ready)
- **Institutional SSO**: SAML, ORCID, LDAP integration
- **Private federation**: Institutional subset sharing within organization
- **Air-gapped deployment**: Secure research environments
- **Unlimited capacity**: Scale based on institutional resources
- **Custom policies**: Data retention, access control, compliance

**Access patterns**: Local (offline development), Institutional (SSO/ORCID), Public (if configured for federation)

### Local Development
Developer and offline workflows:
- **Mock server** for testing VS Code extension
- **Offline-first**: Full functionality without network
- **Sync when connected**: Push/pull subsets to remote when ready

**Access patterns**: Local only (private master KG, subsets generated for publishing)

---

## Phase 1 (MVP): Backend + Viewer

**Goal**: Host, view, and discover knowledge graphs with git-like operations
**Why first**: Establish hosting infrastructure and basic social features before adding editing complexity

**Value delivered**: Researchers can push local graphs to scimantic.io, view them in a browser, and discover others' public research.

### Capabilities

#### 1.1 Backend API (scimantic-server-api)
- **Tech stack**: Python (FastAPI), RDFLib, PostgreSQL + triple store (Jena Fuseki or Oxigraph)
- **Endpoints**:
  - `POST /api/projects/init` - Initialize new KG
  - `POST /api/projects/{id}/push` - Upload project.ttl
  - `GET /api/projects/{id}/pull` - Download project.ttl
  - `POST /api/projects/{id}/clone` - Fork existing project
  - `GET /api/projects/{id}/sparql` - SPARQL endpoint
  - `GET /api/projects/search` - Discover public projects
- **Authentication**: JWT tokens, ORCID OAuth
- **Authorization**: Project ownership, collaborator roles (owner, editor, viewer)
- **Storage**: Hybrid approach
  - PostgreSQL: Project metadata, users, social features
  - Triple store: RDF data for SPARQL queries
  - S3/Object storage: `project.ttl` files (canonical source)

#### 1.2 Web Viewer (scimantic-server-web)
- **Tech stack**: TypeScript, React/Svelte, D3/Cytoscape for visualization
- **Features**:
  - Project homepage: README, metadata, collaborators, stats
  - Graph visualization: Interactive RDF graph explorer
  - Entity browser: List of Questions, Annotations, Evidence, Hypotheses, Designs, Analyses
  - SPARQL playground: Query interface with sample queries
  - Provenance timeline: Chronological view of research workflow
  - Export: Download project.ttl, JSON-LD, or individual nanopublications
- **Content negotiation**:
  - Browser request → HTML viewer
  - API request with `Accept: text/turtle` → RDF
  - Curl/wget → RDF by default

#### 1.3 CLI Tool (scimantic-cli)
- **Commands**:
  ```bash
  scimantic init                    # Initialize local project
  scimantic remote add origin https://scimantic.io/user/project
  scimantic push                    # Upload to server
  scimantic pull                    # Sync changes from server
  scimantic clone user/project      # Fork remote project
  scimantic status                  # Show local vs remote diff
  ```
- **Config**: `.scimantic/config.yaml` with remotes, credentials
- **Integration**: Works with VS Code extension (shared config)

#### 1.4 Academic Social Features (Core)
- **Stars/Bookmarks**: Save interesting projects (like GitHub stars)
  ```turtle
  :project_123 scimantic:stars 42 .
  :user_001 scimantic:starred :project_123 .
  ```
- **Citations**: Track who's building on your research
  ```turtle
  :project_456 scimantic:citedBy <https://doi.org/10.1234/paper1> .
  :project_456 scimantic:forkedFrom :project_123 .
  ```
- **Forks**: Create derivative research projects
  ```turtle
  :project_789 prov:wasDerivedFrom :project_123 ;
      scimantic:forkDate "2025-12-01"^^xsd:date .
  ```
- **Follows**: Track researchers (ORCID-based)
  ```turtle
  :user_001 scimantic:follows <http://orcid.org/0000-0002-1234-5678> .
  ```
- **License tracking**: CC-BY, CC0, All Rights Reserved
  ```turtle
  :project_123 dcterms:license <http://creativecommons.org/licenses/by/4.0/> .
  ```

#### 1.5 Subset Publishing (Integration)
Support subset publishing from main roadmap:
- **Master KG**: Remains private, not pushed to server (local `project.ttl`)
- **Generated Subsets**: Published to server from `subsets/*.ttl` files
- **Public subsets**: Freely accessible, indexed for discovery
- **Institutional subsets**: ORCID/SSO authentication required
- **Private subsets**: Collaborator-only access via explicit permissions

Server-side access control metadata:
```turtle
:subset_nature_2025_v1 a scimantic:PublishedSubset ;
    dcterms:accessRights scimantic:PublicAccess ;  # or InstitutionalAccess, PrivateAccess
    dcterms:license <http://creativecommons.org/licenses/by/4.0/> ;
    scimantic:sourceProject :project_123 .
```

#### 1.6 Discovery and Search
- **Search index**: Full-text search on labels, descriptions
- **Faceted search**: Filter by topic, author, license, access level (public/institutional/private)
- **Featured projects**: Curated showcase
- **Recent activity**: New projects, recent forks, citations
- **Topic tags**: `#protein-folding`, `#computational-chemistry`
  ```turtle
  :project_123 scimantic:topics "protein-folding", "computational-chemistry" .
  ```

### Acceptance Criteria (Phase 1)

- [ ] Researcher can `scimantic push` local graph to scimantic.io
- [ ] Public project page displays graph visualization in browser
- [ ] SPARQL endpoint allows querying project via API
- [ ] Stars and forks are tracked and displayed
- [ ] Search finds projects by topic or author (ORCID)
- [ ] Content negotiation: curl gets RDF, browser gets HTML
- [ ] Self-hosted deployment works with Docker Compose
- [ ] Institutional subsets require ORCID authentication
- [ ] Scimantic.io supports unlimited public subsets
- [ ] GitHub Pages CI/CD workflow generates static viewer from subset `.ttl` files

### Dependencies
- Main roadmap: AI-Assisted Literature Search (Annotations, Evidence persistence)
- Main roadmap: Subset Publishing (Nanopublication publishing) for Trusty URIs
- Main roadmap: Federated Graphs for cross-project references

---

## Phase 2: Web Editor

**Timeline**: Months 7-12
**Goal**: Enable browser-based editing and real-time collaboration
**Why second**: Once hosting is stable, allow researchers without VS Code to participate

**Value delivered**: Researchers can create and edit knowledge graphs directly in browser, collaborate in real-time.

### Capabilities

#### 2.1 Browser-Based KG Editor
- **Entity creation**: Forms for Questions, Annotations, Evidence, Hypothesis, Design, Analysis
- **WYSIWYG provenance**: Drag-and-drop linking (Hypothesis → Evidence)
- **Validation**: Client-side SHACL validation with error messages
- **Autosave**: Draft entities before committing
- **Markdown editor**: Rich text for entity descriptions
- **Integration**: Changes sync back to `project.ttl` (git-like commits)

#### 2.2 Real-Time Collaboration
- **Operational Transform (OT)** or **CRDTs** for concurrent editing
- **Live cursors**: See collaborators' current focus
- **Conflict resolution**: Merge strategies for simultaneous edits
- **Activity feed**: "Alice added Evidence_042", "Bob linked Hypothesis_003"
- **Comments**: Thread-based discussions on entities
  ```turtle
  :comment_001 a scimantic:Comment ;
      scimantic:onEntity :hypothesis_003 ;
      prov:wasAttributedTo <http://orcid.org/...> ;
      rdfs:label "What about the 2023 Smith paper?" .
  ```

#### 2.3 Advanced SPARQL IDE
- **Query editor**: Syntax highlighting, autocomplete
- **Visual query builder**: Drag-and-drop SPARQL construction
- **Saved queries**: Share common queries with team
- **Query history**: Browse past queries
- **Result export**: CSV, JSON, RDF formats
- **Performance**: Query optimization hints

#### 2.4 Peer Review System
- **Review requests**: Invite colleagues to review nanopub before publishing
- **Inline annotations**: Comment on specific triples
- **Approve/reject workflow**: Consensus-based publication
- **Review provenance**: Track who reviewed what
  ```turtle
  :nanopub_001 scimantic:reviewedBy <http://orcid.org/...> ;
      scimantic:reviewStatus "approved" ;
      scimantic:reviewDate "2025-12-15"^^xsd:date .
  ```

#### 2.5 Comments and Discussions
- **Entity-level threads**: Discuss specific hypotheses or evidence
- **Markdown support**: Rich formatting, code blocks
- **Notifications**: Email/in-app when mentioned
- **Resolution**: Mark discussions as resolved
- **Search**: Find discussions by keyword

### Acceptance Criteria (Phase 2)

- [ ] Researcher creates Evidence entity in browser (no VS Code)
- [ ] Two users edit same project simultaneously without conflicts
- [ ] SPARQL IDE executes query and exports results as CSV
- [ ] Peer reviewer adds inline comment: "Check the uncertainty calculation"
- [ ] Discussion thread on Hypothesis_003 has 5 comments, marked resolved
- [ ] Changes from web editor sync to VS Code extension (bidirectional)
- [ ] Browser editor passes same SHACL validation as VS Code

### Dependencies
- Phase 1 complete (stable backend)
- Main roadmap: Hypothesis Management feature

---

## Phase 3: Full Platform

**Timeline**: Months 13-24
**Goal**: Feature parity with VS Code extension, advanced analytics, notebooks integration
**Why third**: Polish and advanced features after core workflows are stable

**Value delivered**: Scimantic-server becomes a complete research platform, not just a hosting service.

### Capabilities

#### 3.1 Feature Parity with VS Code Extension
- **MCP integration**: Browser-based AI assistant (Claude, GPT)
- **Keyboard shortcuts**: Power-user efficiency
- **Offline mode**: Progressive Web App (PWA) with local storage
- **Extensions**: Plugin system for custom tools
- **Themes**: Dark mode, accessibility

#### 3.2 Computational Notebooks Integration
- **Jupyter/Observable notebooks**: Embed in knowledge graph
- **Executable cells**: Run Python/R code against KG via SPARQL
- **Provenance capture**: @activity decorator works in notebooks
- **Visualization**: Inline plots (matplotlib, plotly)
- **Reproducibility**: Version-controlled notebooks + KG state

#### 3.3 Advanced Analytics Dashboard
- **Impact metrics**: Citations, forks, usage (by other projects)
- **Uncertainty heatmap**: Visualize confidence across entire graph
- **Provenance flow**: Sankey diagram (Evidence → Hypothesis → Analysis)
- **Collaboration stats**: Who contributed which entities
- **Timeline**: Research progress over time
- **Export**: PDF reports, presentation slides

#### 3.4 Collections and Topics
- **Curated collections**: "Top DCS Research Projects"
- **Topic pages**: Aggregate all projects tagged `#protein-folding`
- **Leaderboards**: Most-cited projects per topic
- **Recommendations**: "Projects similar to yours"
- **Cross-project SPARQL**: Query across topic-tagged projects

#### 3.5 API Marketplace (Future)
- **Third-party tools**: Integrate computational pipelines
- **Data sources**: Import from DOI, ORCID, institutional repos
- **Export targets**: Zenodo, Figshare, institutional archives
- **Webhooks**: Trigger CI/CD on `scimantic push`

### Acceptance Criteria (Phase 3)

- [ ] Researcher runs Jupyter notebook cell that queries KG via SPARQL
- [ ] Analytics dashboard shows "42 forks, 103 citations, uncertainty avg 0.12"
- [ ] Topic page `/topics/protein-folding` lists 25 public projects
- [ ] PWA works offline, syncs when reconnected
- [ ] Browser MCP assistant suggests hypothesis based on evidence patterns
- [ ] Webhook triggers institutional archive on project publication

### Dependencies
- Phase 2 complete (web editor stable)
- Main roadmap: AI Hypothesis Generation feature

---

## Cross-Cutting Concerns

### Security
- **Authentication**: ORCID OAuth, institutional SSO (SAML)
- **Authorization**: Role-based access (owner, editor, viewer)
- **SPARQL injection**: Parameterized queries, input sanitization
- **Rate limiting**: Prevent abuse (100 req/min per user)
- **Secrets management**: Vault for API keys, database credentials
- **Audit logs**: Track all KG modifications

### Performance
- **Triple store indexing**: Optimize for common SPARQL patterns
- **Caching**: Redis for project metadata, SPARQL results
- **CDN**: Serve static assets (JS, CSS) globally
- **Lazy loading**: Paginate large result sets
- **Background jobs**: Async indexing, analytics computation

### Testing
- **API tests**: pytest for FastAPI endpoints
- **Integration tests**: Test scimantic-cli ↔ server communication
- **Load tests**: Simulate 1000 concurrent users
- **SPARQL tests**: Verify query correctness across databases
- **E2E tests**: Playwright for web UI workflows

### Documentation
- **API docs**: OpenAPI/Swagger auto-generated
- **User guides**: Hosting, collaboration, discovery
- **Developer docs**: Self-hosting, API integration
- **Example projects**: Seed scimantic.io with demo KGs

### Monitoring
- **Metrics**: Prometheus + Grafana dashboards
- **Logs**: Centralized (ELK stack or Loki)
- **Uptime tracking**: Monitor service health
- **Alerts**: Configurable notifications for failures
- **Analytics**: User behavior (privacy-respecting)

---

## Open Source and Community Model

Scimantic-server is **fully open source** under MIT/Apache 2.0 license, prioritizing researcher autonomy and institutional control over monetization.

### Core Components (Open Source)
- ✅ **scimantic-server-api**: FastAPI backend with SPARQL endpoint
- ✅ **scimantic-server-web**: React/Svelte viewer and editor
- ✅ **scimantic-cli**: Git-like command-line tool
- ✅ **Docker Compose**: Production-ready deployment
- ✅ **CI/CD templates**: GitHub Actions for static publishing
- ✅ **Documentation**: Self-hosting guides, API specs, tutorials

### Scimantic.io Community Service
Operated as a **community resource**, not a commercial service:
- **Unlimited public KGs**: No artificial limits on open science
- **Reasonable private KGs**: Limited by available resources, not paywalls
- **Best-effort uptime**: Community support, no SLA guarantees
- **Community governance**: Feature requests via GitHub Discussions
- **Transparent costs**: Operating costs published, donations accepted

### Self-Hosting Advantages
Institutions can deploy scimantic-server with:
- **Full control**: Data sovereignty, custom policies
- **Institutional SSO**: SAML, LDAP, ORCID integration
- **Unlimited scale**: Add compute/storage as needed
- **Private federation**: Institutional subset sharing within organization
- **Compliance**: HIPAA, GDPR, export control requirements
- **Air-gapped**: Secure research environments

### Why Open Source?
1. **Trust**: Researchers can audit the code, verify provenance claims
2. **Longevity**: Projects outlive any single organization
3. **Customization**: Institutions adapt to unique workflows
4. **Collaboration**: Community contributions improve the platform
5. **Academic values**: Align with open science principles

---

## Deferred Capabilities

Valuable but not critical for initial phases:

1. **Mobile app**: iOS/Android for literature review on tablets
2. **Offline-first sync**: CouchDB-style replication
3. **Blockchain registry**: Immutable timestamps (if requested by publishers)
4. **Video annotations**: Link evidence to specific timestamps in talks
5. **LaTeX integration**: Direct citation from Overleaf
6. **Slack/Discord bots**: Notifications for team activity

---

## Integration with Main Scimantic Roadmap

### Phase 1 Dependencies
- **AI-Assisted Literature Search**: Need Annotations and Evidence entities to display
- **Subset Publishing**: Trusty URIs for citability
- **Federated Graphs**: Cross-project references

### Phase 2 Dependencies
- **Hypothesis Management**: Web editor needs Hypothesis model
- **Uncertainty Propagation**: Real-time validation

### Phase 3 Dependencies
- **Computational Provenance**: Notebook integration
- **AI Hypothesis Generation**: Browser-based MCP

### Shared Components
- **scimantic-core**: Backend logic (models, provenance, publish)
- **scimantic-cli**: Shared by VS Code extension and server
- **SHACL shapes**: Same validation rules everywhere
- **LinkML schema**: Single source of truth for ontology

---

## Current Status

- **Phase 1**: Not started (requires AI-Assisted Literature Search feature complete)
- **Phase 2**: Not started
- **Phase 3**: Not started

## Next Steps (Post AI-Assisted Literature Search)

1. **Design REST API**: OpenAPI spec for `/api/projects/*` endpoints
2. **Choose triple store**: Evaluate Jena Fuseki vs Oxigraph (performance, license)
3. **Prototype scimantic-cli**: `init`, `push`, `pull` commands
4. **Build minimal viewer**: Static React app displaying project.ttl
5. **Deploy self-hosted demo**: Docker Compose on scimantic.io
6. **Test git-like workflow**: Push from VS Code → view in browser

---

## Success Metrics

### Phase 1 (6 months)
- 100 public projects hosted on scimantic.io
- 50 active users (monthly)
- 10 self-hosted institutional deployments
- 500 SPARQL queries/day

### Phase 2 (12 months)
- 500 projects (public + private)
- 200 active users
- 20 collaborative projects (2+ editors)
- 50 peer-reviewed nanopubs

### Phase 3 (24 months)
- 2000 projects across all deployment models
- 1000 active users
- 50 institutional self-hosted deployments
- 50K citations tracked
- Community: 5K GitHub stars, 100 code contributors
- 10 published papers using Scimantic for research

---

## Why This Matters

Scimantic-server transforms semantic research from a **solo workflow** into a **collaborative ecosystem**:

1. **Discoverability**: Researchers find relevant prior work via semantic search
2. **Collaboration**: Teams build shared knowledge graphs in real-time
3. **Citability**: Nanopublications get DOIs, tracked like papers
4. **Reproducibility**: Full provenance from evidence to conclusions
5. **Federation**: Cross-institution SPARQL queries
6. **Open Science**: Public KGs accelerate research (while respecting copyright)

Without scimantic-server, each researcher works in isolation. With it, we build a **global semantic research network**.
